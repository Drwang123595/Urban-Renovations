# 重构文件目录结构与管理逻辑 (修正版)

根据您的纠正，`Data/train` 是存放原始上传文件的目录。我将重新调整目录结构设计。

## 1. 目标目录结构
```text
Data/
├── train/                  (存放原始上传文件，如 test1.xlsx, paper_data.xlsx)
│   ├── test1.xlsx
│   └── ...
├── {task_name}/            (任务工作区，task_name = 原始文件名，如 test1)
│   ├── labels/             (手动存放带标签的标准答案)
│   ├── output/             (自动存放模型不同策略的运行结果)
│   └── Result/             (自动存放评估分析报告)
```
*(注：如果您的意图是让 {task_name} 文件夹位于 Data 根目录下，上述结构符合。如果您希望 {task_name} 位于其他特定位置，请指出。目前按“Data 根目录下创建任务文件夹”执行)*

## 2. 修改逻辑与代码

### 2.1 修改 `src/config.py`
*   定义 `TRAIN_DIR = DATA_DIR / "train"`。
*   确保 `TRAIN_DIR` 存在。

### 2.2 修改 `main.py` (输入选择)
*   **输入源**：文件选择器改为扫描 `Data/train/` 目录下的 Excel 文件。

### 2.3 修改 `src/data_processor.py` (处理与输出)
*   **任务名提取**：从输入文件路径提取文件名（无后缀），作为 `task_name`。
*   **目录创建**：
    *   在 `Data/` 下创建文件夹 `{task_name}`。
    *   在 `{task_name}/` 下创建子文件夹 `output/`。
    *   同时预创建 `labels/` 和 `Result/`（方便用户感知结构）。
*   **结果保存**：将模型运行结果保存到 `Data/{task_name}/output/{strategy}_{shot}_{timestamp}.xlsx`。

### 2.4 修改 `evaluate.py` (评估)
*   **选择任务**：列出 `Data/` 下的子文件夹（排除 train、Result 等非任务文件夹，或者根据是否存在 output/labels 子文件夹来判断）。
*   **选择预测文件**：从 `Data/{task_name}/output/` 选择。
*   **选择标签文件**：从 `Data/{task_name}/labels/` 选择。
*   **保存评估报告**：保存到 `Data/{task_name}/Result/`。

## 3. 实施步骤
1.  **更新 Config**：添加 `TRAIN_DIR`。
2.  **更新 Main**：修改文件扫描路径为 `Data/train`。
3.  **更新 Processor**：调整输出目录结构到 `Data/{task_name}/...`。
4.  **更新 Evaluator**：调整评估时的文件查找与保存路径。
